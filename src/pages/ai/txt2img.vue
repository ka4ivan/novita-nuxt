<script setup lang="ts">
import { ref } from "vue";

const breadcrumbs = ref([
  { id: 1, name: "–ì–æ–ª–æ–≤–Ω–∞", slug: "/" },
  { id: 2, name: "AI" },
  { id: 3, name: "–¢–µ–∫—Å—Ç –≤ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" },
]);

const myModels = ref([]);

const addModel = () => {
  if (myModels.value.length < 5) {
    myModels.value.push({
      id: Date.now(),
      model_name: "",
      strength: 0.7,
    });
  }
};

const removeModel = (id: number) => {
  myModels.value = myModels.value.filter((m) => m.id !== id);
};
</script>

<template>
  <main class="main">
    <section class="ai__intro">
      <div class="ai__intro-bg">
        <video class="ai__intro-bg-video" autoplay muted loop>
          <source src="/video/background.mp4" type="video/mp4">
        </video>
      </div>
      <div class="ai__intro-overlay"></div>
      <div class="container ai__intro-container">
        <div class="ai__intro-content">
          <div class="ai__intro-inner">
            <BaseBreadCrumbs :links="breadcrumbs" />
            <h1 class="ai__intro-title">
              –¢–µ–∫—Å—Ç –≤ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            </h1>
          </div>
        </div>
      </div>
    </section>
    <section class="ai__generate">
      <div class="ai__generate-container container">
        <div class="ai__generate-settings">
          <div class="ai__generate-form">
            <div class="ai__generate-form__button-wrapper">
              <button type="submit" class="ai__generate-form__button">
                –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏
              </button>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-field">
                <FieldsInput
                    label="–ú–æ–¥–µ–ª—å"
                    name="model"
                    placeholder="–ú–æ–¥–µ–ª—å"
                    tooltip="–ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–π—Ç–µ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏, —è–∫—ñ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–æ –≤–∞—à–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è"
                />
              </div>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-field">
                <FieldsTextarea
                    label="–ü—Ä–æ–º–ø—Ç"
                    name="prompt"
                    placeholder="–ü—Ä–æ–º–ø—Ç"
                    tooltip="–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –æ–¥–Ω–µ —Å–ª–æ–≤–æ –∞–±–æ –ø–æ–≤–Ω–µ —Ä–µ—á–µ–Ω–Ω—è. –ú–∏ –∑–∞–ø–æ–≤–Ω–∏–ª–∏ –∫—ñ–ª—å–∫–∞ –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø—ñ–¥–∫–∞–∑–æ–∫, —â–æ–± –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –≤–∞–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±—É–ª–∏ –±–ª–∏–∂—á–∏–º–∏ –¥–æ –æ–±—Ä–∞–Ω–æ—ó –≤–∞–º–∏ –º–æ–¥–µ–ª—ñ."
                />
              </div>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-cross">
                <div class="ai__generate-form__input-field">
                  <FieldsInput
                      label="–†–æ–∑–¥—ñ–ª—å–Ω–∞ –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å"
                      name="width"
                      type="number"
                      placeholder="Width"
                      tooltip="–ù–∏–∂—á–∞ —Ä–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Ä–æ–∑–º–∏—Ç–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å —ñ–∑ –º–µ–Ω—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –¥–µ—Ç–∞–ª–µ–π. –í–∏—â–∞ —Ä–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —Å–ø–æ–≤—ñ–ª—å–Ω—é—î —à–≤–∏–¥–∫—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–∞ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –≤—ñ–¥ –æ—á—ñ–∫—É–≤–∞–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ —Ä–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å: 1024√ó1024"
                  />
                </div>
                  <BaseIconSvg
                      icon-name="cross"
                      class="ai__generate-form__input-cross-icon"
                      width="1rem"
                      height="1rem"
                  />
                <div class="ai__generate-form__input-field">
                  <FieldsInput
                      label="&nbsp;"
                      name="height"
                      type="number"
                      placeholder="Height"
                  />
                </div>
              </div>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-field">
                <FieldsRange
                    label="–ö—Ä–æ–∫–∏"
                    name="steps"
                    modelValue="20"
                    tooltip="–ë—ñ–ª—å—à–µ –∫—Ä–æ–∫—ñ–≤, —Ç–æ–Ω—à—ñ –¥–µ—Ç–∞–ª—ñ. –ü—ñ—Å–ª—è 20 - –æ–±–º–µ–∂–µ–Ω–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è."
                />
              </div>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-field">
                <FieldsRange
                    label="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ó–æ–±—Ä–∞–∂–µ–Ω—å"
                    name="image_num"
                    modelValue="5"
                    min="1"
                    max="8"
                />
              </div>
            </div>
            <div class="ai__generate-form__input">
              <div class="ai__generate-form__input-title">
                <label class="input__label">
                  –ú–æ—ó –ú–æ–¥–µ–ª—ñ
                  <BaseTooltip text="LoRA ‚Äî —Ü–µ —à–≤–∏–¥–∫–∏–π —ñ –ª–µ–≥–∫–∏–π –º–µ—Ç–æ–¥ –Ω–∞–≤—á–∞–Ω–Ω—è, —è–∫–∏–π –≤—Å—Ç–∞–≤–ª—è—î —Ç–∞ –Ω–∞–≤—á–∞—î –∑–Ω–∞—á–Ω–æ –º–µ–Ω—à—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –∑–∞–º—ñ—Å—Ç—å —É—Å—ñ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–æ–¥–µ–ª—ñ. –ù–∞—Ä–∞–∑—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –¥–æ 5 LoRA." />
                </label>
              </div>
              <div class="ai__generate-form__my-model">
                <div
                    v-for="(model, index) in myModels"
                    :key="model.id"
                    class="ai__generate-form__my-model__wrapper"
                >
                  <button
                      role="button"
                      type="button"
                      class="ai__generate-form__my-model__close"
                      @click="removeModel(model.id)"
                  >
                    <BaseIconSvg
                        icon-name="cross"
                        customClass="ai__generate-form__my-model__close-icon"
                        width="2rem"
                        height="2rem"
                    />
                  </button>

                  <div class="ai__generate-form__input">
                    <div class="ai__generate-form__input-field">
                      <FieldsInput
                          :label="`–ú–æ–¥–µ–ª—å ${index + 1}`"
                          :name="`loras[${index}][model_name]`"
                          placeholder="–ú–æ–¥–µ–ª—å"
                      />
                    </div>
                  </div>

                  <div class="ai__generate-form__input">
                    <div class="ai__generate-form__input-field">
                      <FieldsRange
                          label="–°–∏–ª–∞ –í–ø–ª–∏–≤—É"
                          :name="`loras[${index}][strength]`"
                          :modelValue="model.strength"
                          min="0"
                          max="1"
                          step="0.01"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- üîπ –∫–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ < 5 -->
              <button
                  v-if="myModels.length < 5"
                  role="button"
                  type="button"
                  class="ai__generate-form__input-button"
                  @click="addModel"
              >
                <div class="ai__generate-form__input-button-text">
                  <BaseIconSvg
                      icon-name="cross"
                      customClass="ai__generate-form__input-button-icon"
                      width="1rem"
                      height="1rem"
                  />
                  –î–æ–¥–∞—Ç–∏ –í–ª–∞—Å–Ω—É –ú–æ–¥–µ–ª—å
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</template>

<style scoped>

</style>